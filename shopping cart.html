<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Shopping Cart - NIYAY WORLD</title>
<script type="text/javascript">
function MM_preloadImages() { 
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}
function MM_swapImgRestore() { 
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}
function MM_findObj(n, d) { 
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}
</script>

<style>
body {
    background: linear-gradient(135deg,#6a11cb,#2575fc,#b721ff);
    background-attachment: fixed;
    font-family: Arial, sans-serif;
    margin: 0;
}
table { margin: auto; }
td { padding: 10px; }
td img { border-radius: 20px; transition: all 0.3s ease; cursor: pointer; }
td img:hover { transform: scale(1.05); }

.cart-container {
    background: white;
    border-radius: 30px;
    padding: 40px;
    margin-top: 30px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.3);
}
.cart-item-row {
    border-bottom: 1px solid #eee;
    padding: 20px 0;
    display: flex;
    align-items: center;
}
.btn-remove {
    background-color: #ff4757; color: white; border: none;
    padding: 10px 20px; border-radius: 10px; cursor: pointer;
    font-weight: bold; transition: 0.3s;
}
.btn-remove:hover { background-color: #ff6b81; }

#totalBox {
    text-align: right; font-size: 28px; font-weight: bold;
    color: #2575fc; padding: 20px; border-top: 2px solid #2575fc;
}
</style>
</head>

<body background="../../Green Natural Background Poster.png" onLoad="MM_preloadImages('../review 2.png','../Recommended 2.png','../HOME 2.png','../All products 2.png','../Best 2.png','../New 2.png','../promotion 2.png','../review  2.png','../Recommended  2.png','../Make payment 2.png','../profile 2.png','../Search 2.png')">

<header>
  <table width="1400" border="0">
      <tr><td><img src="../NIYAY WORLD (7).png" width="1400" height="200" alt=""/></td></tr>
  </table>
</header>
<table width="1400" border="0">
  <tbody>
    <tr>
      <td><a href="index.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image4','','../HOME 2.png',1)"><img src="../HOME 1.png" alt="" width="140" height="40" id="Image4"></a></td>
      <td><a href="All products.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image5','','../All products 2.png',1)"><img src="../All products 1.png" alt="" width="140" height="40" id="Image5"></a></td>
      <td><a href="Best selling products.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image6','','../Best 2.png',1)"><img src="../Best 1.png" alt="" width="140" height="40" id="Image6"></a></td>
      <td><a href="New product.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image7','','../New 2.png',1)"><img src="../New  1.png" alt="" width="140" height="40" id="Image7"></a></td>
      <td><a href="promotion.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image8','','../promotion 2.png',1)"><img src="../promotion  1.png" alt="" width="140" height="40" id="Image8"></a></td>
      <td><a href="book review.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image9','','../review  2.png',1)"><img src="../_review  1.png" alt="" width="140" height="40" id="Image9"></a></td>
      <td><a href="Recommended products.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image10','','../Recommended  2.png',1)"><img src="../Recommended 1.png" alt="" width="140" height="40" id="Image10"></a></td>
      <td><a href="Make payment.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image11','','../Make payment 2.png',1)"><img src="../Make payment  1.png" alt="" width="140" height="40" id="Image11"></a></td>
      <td><a href="profile.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image12','','../profile 2.png',1)"><img src="../profile  1.png" alt="" width="140" height="40" id="Image12"></a></td>
      <td><a href="search for product.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image13','','../Search 2.png',1)"><img src="../Search1.png" alt="" width="140" height="40" id="Image13"></a></td>
    </tr>
  </tbody>
</table>




<table width="1000" border="0" class="cart-container">
  <tbody>
    <tr>
      <td align="center"><h1 style="color:#2575fc;">ตะกร้าสินค้าของคุณ</h1><hr></td>
    </tr>
    <tr>
      <td>
        <div id="cartContent">
            </div>
        <div id="noItemMsg" style="text-align:center; padding:30px; color:#666; font-style:italic;">ยังไม่มีสินค้าในตะกร้า</div>
        <div id="totalBox" style="display:none;">รวมราคาทั้งสิ้น: <span id="cartTotal">0</span> บาท</div>
      </td>
    </tr>
    <tr>
      <td align="center" style="padding-top:30px;">
        <table width="700" border="0">
            <tr>
              <td><a href="Make payment.html"><img id="buyBtn" src="../BUY.png" width="300" height="90" style="display:none;"></a></td>
              <td><a href="All products.html"><img src="../back (1).png" width="300" height="90"></a></td>
            </tr>
        </table>
      </td>
    </tr>
  </tbody>
</table>

<script>
function renderCart() {
    
    var cartItems = JSON.parse(localStorage.getItem('allCartData')) || [];
    var cartContent = document.getElementById('cartContent');
    var noItemMsg = document.getElementById('noItemMsg');
    var totalBox = document.getElementById('totalBox');
    var cartTotal = document.getElementById('cartTotal');
    var buyBtn = document.getElementById('buyBtn');

    cartContent.innerHTML = "";
    var total = 0;

    if (cartItems.length > 0) {
        noItemMsg.style.display = 'none';
        totalBox.style.display = 'block';
        buyBtn.style.display = 'block';

        cartItems.forEach(function(item, index) {
            total += parseFloat(item.price);
            var itemDiv = document.createElement('div');
            itemDiv.className = 'cart-item-row';
            itemDiv.innerHTML = `
                <img src="${item.img}" width="150" style="margin-right:20px;">
                <div style="flex-grow:1;">
                    <h2 style="margin:0;">${item.name}</h2>
                    <p style="color:#ff4757; font-size:24px; font-weight:bold;">ราคา: ${item.price.toLocaleString()} บาท</p>
                </div>
                <button class="btn-remove" onclick="deleteItem(${index})">ลบ</button>
            `;
            cartContent.appendChild(itemDiv);
        });
        cartTotal.innerText = total.toLocaleString();
    } else {
        noItemMsg.style.display = 'block';
        totalBox.style.display = 'none';
        buyBtn.style.display = 'none';
    }
}

function deleteItem(index) {
    var cartItems = JSON.parse(localStorage.getItem('allCartData')) || [];
    cartItems.splice(index, 1);
    localStorage.setItem('allCartData', JSON.stringify(cartItems));
    renderCart();
}

renderCart();
</script>
</body>
</html>